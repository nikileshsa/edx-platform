<%! from django.utils.translation import ugettext as _ %>
<%inherit file="base.html" />
<%namespace name='static' file='static_content.html'/>

<%! from django.core.urlresolvers import reverse %>
<%block name="title">${_("Push Course to LMS")}</%block>
<%block name="bodyclass">is-signedin course tools export</%block>

<%block name="content">
<div class="wrapper-mast wrapper">
  <header class="mast has-subtitle">
    <h1 class="page-header">
      <small class="subtitle">${_("Tools")}</small>
      <span class="sr">&gt; </span>${_("Push to LMS")}
    </h1>
  </header>
</div>

<div class="main-wrapper">
  <div class="inner-wrapper">

    <article class="export-overview">
      <div class="description">
        <h2>${_("About Push to LMS")}</h2>
        <p>${_("Use this to export your course to its github site.")}</p>
        <p>${_("This will then trigger an automatic update of the main LMS site")}
        ${_("and update the contents of your course visible there to students.")}</p>

        <ul>
          <li>${_("Your course:")} <font color="green">${context_course.id}</font></li>
          <li>${_("Course github site:")} <font color="blue">${context_course.lms.giturl}</font></li>
	  % if msg:
              <li>msg: <pre>${msg|n}</pre></li>
	  % endif
        </ul>

      </div>

      <!-- default state -->
      <div class="export-form-wrapper">
        <form action="${reverse('push_to_lms', kwargs=dict(org=context_course.location.org, course=context_course.location.course, name=context_course.location.name))}" method="post" enctype="multipart/form-data" class="export-form">
          <h2>${_("Push Course:")}</h2>

          % if not context_course.lms.giturl:
              <p style="color:red">${_("giturl must be defined in your course settings before you can push to LMS")}</p>
	  % else:
              <a href="${reverse('push_to_lms', kwargs=dict(org=context_course.location.org, course=context_course.location.course, name=context_course.location.name))}?action=push" class="button-export">${_("Push to LMS")}</a>
	  % endif

        </form>
      </div>

    </article>
  </div>
</div>
</%block>
